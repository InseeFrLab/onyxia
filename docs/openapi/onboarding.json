{
    "openapi": "3.0.1",
    "info": {
      "title": "onboarding-api",
      "description": "Onboarding API is designed to remain minimal, giving each Onyxia instance the flexibility to use this service or provide its own. It also allows adding features such as quota management. By separating this API from the core functionalities, onyxia-web must handle extra logicâ€”unlike the previous setup, where namespace creation was silently performed by the older API.",
      "version": "1.0.0"
    },
    "servers": [
      {
        "url": "https://onyxia-onboarding.example.com",
        "description": "Generated server url"
      }
    ],
    "tags": [
      {
        "name": "Onboarding",
        "description": "Onboarding related services"
      }
    ],
    "paths": {
      "/onboarding": {
        "post": {
          "tags": [
            "Onboarding"
          ],
          "summary": "Init a user or a group",
          "description": "This endpoint handle all tasks when a user logged into the platform. Create or update of a namespace with metadata information like the API today. We should also think if we keep the behaviour to create a rolebinding for the oidc user or not. This only help external apiserver call that is not the main goal of onyxia. At least it must not be the default behaviour. We can keep an option to explicitely crate this rolebinding",
          "operationId": "onboard",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OnboardingRequest"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": "OK"
            },
            "401": {
              "description": "Unauthorized"
            },
            "403": {
              "description": "Forbidden"
            }
          },
          "security": [
            {
              "auth": []
            }
          ]
        }
      }
    },
    "components": {
      "schemas": {
        "OnboardingRequest": {
          "type": "object",
          "properties": {
            "namespace": {
              "type": "string"
            }
          },
          "description": "Specification on which namespace to create"
        }
      },
      "securitySchemes": {
        "auth": {
          "type": "openIdConnect",
          "openIdConnectUrl": "https://auth.lab.sspcloud.fr/auth/realms/sspcloud/.well-known/openid-configuration"
        }
      }
    }
  }
